name: Run Data Streamer

on:
  workflow_dispatch: # Manual trigger only

# This ensures only one streamer can ever run at a time
concurrency:
  group: streamer-control
  cancel-in-progress: true

env:
  PROJECT_FOLDER: data-engine

jobs:
  stream-data:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install Dependencies
        run: pip install requests

      - name: Run Streamer
        # Will run for ~5.5 hours and perfectly stream all 10,000 records
        run: python $PROJECT_FOLDER/streamer.py